<div class="container">
  <h2>Clients List</h2>
  <div class="container">
    <button class="btn btn-info btn-sm" (click)="show=!show"><b>Add client</b></button>
  </div>
  <div class="container" *ngIf="show">

    <form #myForm="ngForm" (ngSubmit)="onSubmit(myForm)" class="form-horizontal">
      <!-- [formGroup]="myForm" -->

      <h5>Client</h5>

      <div class="form-group">
        <label class="col-xs-3"> First Name</label>
        <input type="text" class="form-control" name="name" ngModel required>
        <!-- formControlName="name" -->
        <!-- <control-messages [control]="myForm.controls.name" class="error-msg messages text-left text-danger">name</control-messages> -->
      </div>

      <div class="form-group">
        <label class="col-xs-3">Last Name</label>
        <input type="text" class="form-control" name="surname" ngModel required>
        <!-- formControlName="surname" -->
        <!-- <control-messages [control]="myForm.controls.surname" class="error-msg messages text-left text-danger">surname</control-messages> -->
      </div>

      <div class="form-group">
        <label class="col-xs-3">Email</label>
        <input type="email" class="form-control" name="email" ngModel required email #email="ngModel">
        <span class="help-bpx" *ngIf="email.touched && !email.valid ">Please enter the Email Value</span>
        <!-- <control-messages [control]="myForm.controls.email" class="error-msg messages text-left text-danger">email</control-messages> -->
      </div>

      <div class="form-group">
        <label class="col-xs-3">Contact number</label>
        <input type="tel" class="form-control" name="contact" ngModel required>
        <!-- <control-messages [control]="myForm.controls.contact" class="error-msg messages text-left text-danger">contact</control-messages> -->
      </div>

      <div class="form-group">
        <label class="col-xs-3" for="reservation">
          <input type="checkbox" (click)="showValue()"> Reservation
        </label>
      </div>

      <div class="form-group" *ngIf="checked">
        <h5>Reservation</h5>
        <div class="selectContainer">
          <select (change)="onChange($event.target.value)" class="form-control" name="reservation" ngModel>
          <option  value="" disabled selected>Choose reservation</option>
          <ng-container  *ngFor=" let reservation of reservations">
          <option [value]="reservation._id" *ngIf="!reservation.client" >
            Booked at {{reservation.dataCreare}}, for {{reservation.nrPersoane}} people, check-in day {{reservation.dataCheckIn}}, check-out day {{reservation.dataCheckOut}}.
          </option>
        </ng-container>
        <!-- <control-messages [control]="myForm.controls.reservation" class="error-msg messages text-left text-danger">reservation</control-messages> -->
        </select>
        </div>
      </div>

      <div class="raw">
        <div class="form-group">
          <button class="btn btn-dafault" type="submit" (click)="save(myForm)">ADD CLIENT</button>
          <!-- [disabled]="!form.valid" -->
        </div>
      </div>

    </form>
  </div>
  <div class="container" style="overflow-x:auto;">
    <table class="table">
      <thead>
        <tr>
          <th>Nr.</th>
          <th>Name</th>
          <th>Surname</th>
          <th>Email</th>
          <th>Contact number</th>
          <th>Reservation</th>
        </tr>
      </thead>
      <tbody>
        <!-- <ng-container *ngIf="onEdit"></ng-container> -->
        <tr *ngFor="let client of clients">
          <td>{{clients.indexOf(client)+1}}</td>
          <td>{{ client.nume }}</td>
          <td>{{ client.prenume }}</td>
          <td>{{ client.email }}</td>
          <td>{{ client.telefon }}</td>
          <td *ngIf="client.rezervare">âœ“</td>
          <td *ngIf="!client.rezervare">-</td>
          <td>
            <button class="btn btn-success" disabled (click)="editClient()">Edit</button>
            <button class="btn btn-danger" (click)="deleteClient(client._id)">Delete</button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
