<div class="container py-2">
  <div class="col-md-12 mx-auto">
    <div class="card rounded-0">
      <div class="card-header" style="background-color:#390056">
        <h5 class="text-center" style="color:white;">Check Availability</h5>
      </div>
      <div class="card-body">
        <form class="center" id="change_dates" #availabilityForm="ngForm" (ngSubmit)="checkAvailability(availabilityForm)">
          <div class="row text-center">
            <div class="col">
              <label>Check-in</label>
              <div class="input_wrapper">
                <input class="form-control" type="date" data-value="{{currDate| date:'yyyy-MM-dd'}}" name="checkIn" ngModel required/>
                <span class="icon search_calendar-icon"></span>
              </div>
            </div>
            <div class="col">
              <label id="label-checkout">Check-out</label>
              <div>
                <input type="date" class="form-control" data-value="{{nextDayDate| date:'yyyy-MM-dd'}}" name="checkOut" ngModel required />
                <span class="icon search_calendar-icon"></span>
              </div>
            </div>
          </div>
          <div class="row text-center">
            <div class="col">
              <label>Room</label>
              <div class="selectContainer">
                <select class="form-control" ng-list name="room" ngModel required room #room="ngModel" required (change)="setNewRoom(room.value)">
                <option  value="" disabled selected>Choose room</option>
                <ng-container *ngFor="let room of rooms">
                  <option [value]="room._id">"{{room.name}}" with the capacity of {{room.capacity}} people and the price of {{room.price}} lei/person</option>
                </ng-container>
                </select>
              </div>
            </div>
            <div class="col">
              <label>Guests</label>
              <select name="adults" ngModel class="form-control" required>
                <option selected value="1">
                  1 adult
                </option>
                <ng-container *ngIf="room.touched && room.valid">
                  <option  *ngFor="let n of range(2,curRoom.capacity)" [value]="n">
                    {{n}} adults
                  </option>
                </ng-container>
              </select>
            </div>
          </div>
          <div class="row text-center">
            <div class="col" style="padding-top:25px;">
              <button class="btn btn-success" type="submit">Check availability</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<div class="container py-2" *ngIf="availableRooms">

  <div class="col-md-12 mx-auto">
    <div class="card rounded-0">
      <div class="card-header" style="background-color:#0E894C">
        <h5 style="color:white;">{{curRoom.name}}</h5>
      </div>
      <div class="card-body" *ngIf="inAvailableRooms(curRoom)">
        <div class="row">
          <div class="col-md-4 mx-auto"><img src="http://via.placeholder.com/200x100" style="width:200px" alt="Room picture"></div>
          <div class="col-md-8 mx-auto"><a>{{curRoom.name}}</a></div>
        </div>
        <!-- <p>Room is available</p> -->

      </div>

      <div class="card-body" *ngIf="!inAvailableRooms(curRoom)">
        <!-- <ng-container *ngFor="let room of availableRooms| searchById:room.value"> -->
        <a class="text-muted">This room is booked for these dates</a>
        <!-- </ng-container> -->
      </div>
    </div>
  </div>

  <div class="col-md-12 mx-auto">
    <div class="card rounded-0">
      <div class="card-header" style="background-color:#0E894C">
        <h5 style="color:white;">All rooms available these dates</h5>
      </div>
      <div class="card-body">
        <ul>
          <ng-container *ngFor="let room of availableRooms">
            <li>Room: {{room.name}}</li>
          </ng-container>
        </ul>
      </div>
    </div>
  </div>
</div>

<div class="container py-2">
  <h2 class="text-center text-black mb-4">Book a room</h2>
  <div class="row">
    <div class="col-md-12 mx-auto">
      <div class="card rounded-0">

        <div class="card-header">
          <h5>Fill the fields</h5>
        </div>

        <div class="card-body">
          <form #myForm="ngForm" (ngSubmit)="onSubmit(myForm)" class="form-horizontal">

            <div class="form-group">
              <label class="col-xs-3">First name</label>
              <input type="text" class="form-control" name="name" ngModel required>
            </div>

            <div class="form-group">
              <label class="col-xs-3">Last name</label>
              <input type="text" class="form-control" name="surname" ngModel required>
            </div>

            <div class="form-group">
              <label class="col-xs-3">Email</label>
              <input type="email" class="form-control" name="email" ngModel required email #email="ngModel">
              <span class="form-text text-muted" *ngIf="email.touched && !email.valid ">Please enter the Email value</span>
            </div>

            <div class="form-group">
              <label class="col-xs-3">Contact number</label>
              <input type="tel" class="form-control" name="contact" ngModel required>
            </div>

            <div class="form-group">
              <label class="col-xs-3">Room</label>
              <div class="selectContainer">
                <select class="form-control" name="camera" ngModel required (change)="getRoomData(myForm)">
                <option  value="" disabled selected>Choose room</option>
                <ng-container  *ngFor="let room of rooms">
                  <option [value]="room._id" >Room "{{room.denumire}}" with the capacity of {{room.capacitate}} people and the price of {{room.pret}} lei/person.</option>
                </ng-container>
                </select>
              </div>
            </div>

            <div class="form-group">
              <label class="col-xs-3">Number of people</label>
              <input type="number" min="1" max="{{capacity| number }}" class="form-control" name="nrPeople" ngModel required nrPeople #nrPeople="ngModel">
              <span class="form-text text-muted" *ngIf="nrPeople.value>capacity">The maximum value is {{capacity}}</span>
              <span class="form-text text-muted" *ngIf="nrPeople.value==0 && nrPeople.touched">The minimum value is 1</span>
            </div>

            <div class="form-group">
              <label class="col-xs-3">Check-in</label>
              <input type="date" min="{{currDate | date:'yyyy-MM-dd'}}" class="form-control" name="checkIn" ngModel required checkIn #checkIn="ngModel" (change)="getCheckIn(myForm)">
            </div>

            <div class="form-group">
              <label class="col-xs-3">Check-out</label>
              <input type="date" min="{{ CheckIn | date:'yyyy-MM-dd'}}" class="form-control" name="checkOut" ngModel required checkOut #checkOut="ngModel" (change)="getCheckOut(myForm)">
              <!-- <ng-container *ngIf="checkOut.touched && !checkOut.valid && checkIn.touched && !checkIn.valid"> -->
              <span class="form-text text-muted" *ngIf="((CheckOut | date:'yyyy-MM-dd')==(CheckIn | date:'yyyy-MM-dd')) && checkOut.touched && checkIn.touched">The stay is too short!</span>
              <!-- </ng-container> -->
            </div>

            <!-- <div class="form-group">
              <label class="col-xs-3">Total price</label>
              <input readonly="readonly" type="text" class="form-control" value="{{price*nrDays*myForm.value.nrPeople}}" name="totalPrice" ngModel>
            </div> -->

            <div class="form-group">
              <button id="btnSubmit" class="btn btn-success btn-lg btn-block" type="submit"><b>Book</b></button>
            </div>


            <div class="form-group">
              <button class="btn btn-link" (click)="myForm.reset()">Reset</button>
            </div>

          </form>
        </div>
      </div>
    </div>

  </div>
</div>
