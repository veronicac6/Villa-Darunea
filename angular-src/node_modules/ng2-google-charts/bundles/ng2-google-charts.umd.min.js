!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("@angular/core")):"function"==typeof define&&define.amd?define(["@angular/core"],e):"object"==typeof exports?exports["ng2-google-charts.umd.min"]=e(require("@angular/core")):t["ng2-google-charts.umd.min"]=e(t["@angular/core"])}("undefined"!=typeof self?self:this,function(t){return function(t){function e(o){if(r[o])return r[o].exports;var n=r[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,o){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/",e(e.s=5)}([function(e,r){e.exports=t},function(t,e,r){"use strict";r.d(e,"e",function(){return i}),r.d(e,"c",function(){return a}),r.d(e,"b",function(){return c});var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),n=function(){function t(){}return t}(),i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(n),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(n),c=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(n)},function(t,e,r){"use strict";r.d(e,"a",function(){return u});var o=r(0),n=(r.n(o),r(3)),i=r(4),a=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(i<3?n(a):i>3?n(e,r,a):n(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},u=function(){function t(t,e){this.el=t,this.loaderService=e,this.chartSelect=new o.EventEmitter,this.chartReady=new o.EventEmitter,this.chartError=new o.EventEmitter,this.mouseOver=new o.EventEmitter,this.mouseOut=new o.EventEmitter}return t.prototype.ngOnChanges=function(t){var e=this;if(t.data){if(!this.data)return;this.options=this.data.options,this.loaderService.load(this.data.chartType,this.data.apiKey).then(function(){void 0===e.wrapper||e.wrapper.getChartType()!==e.data.chartType?e.wrapper=new google.visualization.ChartWrapper(e.data):(e.unregisterChartEvents(),e.wrapper.setDataTable(e.data.dataTable),e.wrapper.setOptions(e.options)),e.registerChartWrapperEvents(),e.reformat(),e.redraw()})}},t.prototype.redraw=function(){this.reformat(),this.wrapper.draw(this.el.nativeElement.querySelector("div"))},t.prototype.reformat=function(){if(this.data&&void 0!==this.data.formatters)for(var t=0,e=this.data.formatters;t<e.length;t++)for(var r=e[t],o=google.visualization[r.type],n=r.options,i=new o(n),a=0,c=r.columns;a<c.length;a++){var u=c[a];i.format(this.wrapper.getDataTable(),u)}},t.prototype.getSelectorBySeriesType=function(t){return{bars:"bar#%s#%r",haxis:"hAxis#0#label",line:"point#%s#%r",legend:"legendentry#%s",area:"point#%s#%r"}[t]},t.prototype.getSeriesByColumn=function(t){for(var e=0,r=this.wrapper.getDataTable(),o=t-1;o>=0;o--){var n=r.getColumnRole(o),i=r.getColumnType(o);"data"!==n&&"number"!==i||e++}return e},t.prototype.getBoundingBoxForItem=function(t){var e={top:0,left:0,width:0,height:0};if(this.cli){var r=t.column,o=this.getSeriesByColumn(r),n=(t.row,t.row),i=this.options.seriesType;if(this.options.series&&this.options.series[o]&&this.options.series[o].type&&(i=this.options.series[o].type),i){var a=this.getSelectorBySeriesType(i);if(a){a=a.replace("%s",o+"").replace("%c",r+"").replace("%r",n+"");var c=this.cli.getBoundingBox(a);c&&(e=c)}}}return e},t.prototype.getValueAtPosition=function(t){return null===t.row?null:this.wrapper.getDataTable().getValue(t.row,t.column)},t.prototype.getColumnTypeAtPosition=function(t){return this.wrapper.getDataTable().getColumnType(t.column)||""},t.prototype.getColumnLabelAtPosition=function(t){return this.wrapper.getDataTable().getColumnLabel(t.column)||""},t.prototype.getHTMLTooltip=function(){var t=new o.ElementRef(this.el.nativeElement.querySelector(".google-visualization-tooltip"));return new i.a(t)},t.prototype.parseMouseEvent=function(t){return{position:t,boundingBox:this.getBoundingBoxForItem(t),value:this.getValueAtPosition(t),columnType:this.getColumnTypeAtPosition(t),columnLabel:this.getColumnLabelAtPosition(t)}},t.prototype.unregisterChartEvents=function(){google.visualization.events.removeAllListeners(this.wrapper)},t.prototype.registerChartEvents=function(){var t=this;if(this.mouseOver.observers.length>0){var e=this.wrapper.getChart();this.cli=e.getChartLayoutInterface(),google.visualization.events.addListener(e,"onmouseover",function(e){var r=t.parseMouseEvent(e);r.tooltip=t.getHTMLTooltip(),t.mouseOver.emit(r)})}if(this.mouseOut.observers.length>0){var e=this.wrapper.getChart();this.cli=e.getChartLayoutInterface(),google.visualization.events.addListener(e,"onmouseout",function(e){var r=t.parseMouseEvent(e);t.mouseOut.emit(r)})}},t.prototype.registerChartWrapperEvents=function(){var t=this;google.visualization.events.addListener(this.wrapper,"ready",function(){t.chartReady.emit({message:"Chart ready"}),t.registerChartEvents()}),google.visualization.events.addListener(this.wrapper,"error",function(e){t.chartError.emit(e)}),google.visualization.events.addListener(this.wrapper,"select",function(){var e,r=t.wrapper.visualization.getSelection()[0];if(void 0!==r){var o=[],n=[];if(null!==r.row)for(var i=t.wrapper.getDataTable(),a=i.getNumberOfColumns(),c=0;c<a;c++)o.push(i.getValue(r.row,c)),n.push(i.getFormattedValue(r.row,c));u={message:"select",row:r.row,column:r.column},u.selectedRowValues=o,u.selectedRowFormattedValues=n,e=u}else e={message:"deselect",row:null,column:null,selectedRowValues:[],selectedRowFormattedValues:[]};t.chartSelect.emit(e);var u})},a([Object(o.Input)(),c("design:type",Object)],t.prototype,"data",void 0),a([Object(o.Output)(),c("design:type","function"==typeof(e=void 0!==o.EventEmitter&&o.EventEmitter)&&e||Object)],t.prototype,"chartReady",void 0),a([Object(o.Output)(),c("design:type","function"==typeof(r=void 0!==o.EventEmitter&&o.EventEmitter)&&r||Object)],t.prototype,"chartError",void 0),a([Object(o.Output)(),c("design:type","function"==typeof(u=void 0!==o.EventEmitter&&o.EventEmitter)&&u||Object)],t.prototype,"chartSelect",void 0),a([Object(o.Output)(),c("design:type","function"==typeof(s=void 0!==o.EventEmitter&&o.EventEmitter)&&s||Object)],t.prototype,"mouseOver",void 0),a([Object(o.Output)(),c("design:type","function"==typeof(p=void 0!==o.EventEmitter&&o.EventEmitter)&&p||Object)],t.prototype,"mouseOut",void 0),t=a([Object(o.Component)({selector:"google-chart",template:"<div></div>",changeDetection:o.ChangeDetectionStrategy.OnPush}),c("design:paramtypes",["function"==typeof(l=void 0!==o.ElementRef&&o.ElementRef)&&l||Object,"function"==typeof(f=void 0!==n.a&&n.a)&&f||Object])],t);var e,r,u,s,p,l,f}()},function(t,e,r){"use strict";r.d(e,"a",function(){return c});var o=r(0),n=(r.n(o),this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(i<3?n(a):i>3?n(e,r,a):n(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a}),i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(r,o){e(r,o,t)}},c=function(){function t(t){this.chartPackage={AnnotationChart:"annotationchart",AreaChart:"corechart",Bar:"bar",BarChart:"corechart",BubbleChart:"corechart",Calendar:"calendar",CandlestickChart:"corechart",ColumnChart:"corechart",ComboChart:"corechart",PieChart:"corechart",Gantt:"gantt",Gauge:"gauge",GeoChart:"geochart",Histogram:"corechart",Line:"line",LineChart:"corechart",Map:"map",OrgChart:"orgchart",Sankey:"sankey",Scatter:"scatter",ScatterChart:"corechart",SteppedAreaChart:"corechart",Table:"table",Timeline:"timeline",TreeMap:"treemap",WordTree:"wordtree"},this.googleScriptLoadingNotifier=new o.EventEmitter,this.googleScriptIsLoading=!1,this.localeId=t}return t.prototype.load=function(t,e){var r=this;return new Promise(function(o,n){void 0===o&&(o=Function.prototype),void 0===n&&(n=Function.prototype),r.loadGoogleChartsScript().then(function(){var n={packages:[r.chartPackage[t]],language:r.localeId,callback:o};e&&(n.mapsApiKey=e),google.charts.load("45.2",n)}).catch(function(t){return n()})})},t.prototype.loadGoogleChartsScript=function(){var t=this;return new Promise(function(e,r){if(void 0===e&&(e=Function.prototype),void 0===r&&(r=Function.prototype),"undefined"!=typeof google&&google.charts)e();else if(t.googleScriptIsLoading)t.googleScriptLoadingNotifier.subscribe(function(t){t?e():r()});else{t.googleScriptIsLoading=!0;var o=document.createElement("script");o.type="text/javascript",o.src="https://www.gstatic.com/charts/loader.js",o.async=!0,o.defer=!0,o.onload=function(){t.googleScriptIsLoading=!1,t.googleScriptLoadingNotifier.emit(!0),e()},o.onerror=function(){t.googleScriptIsLoading=!1,t.googleScriptLoadingNotifier.emit(!1),r()},document.getElementsByTagName("head")[0].appendChild(o)}})},t=n([Object(o.Injectable)(),a(0,Object(o.Inject)(o.LOCALE_ID)),i("design:paramtypes",[String])],t)}()},function(t,e,r){"use strict";r.d(e,"a",function(){return o});var o=function(){function t(t){this.tooltipDOMElement=t}return t.prototype.setPosition=function(e,r){this.tooltipDOMElement.nativeElement.style.left=e+t.PIXELS,this.tooltipDOMElement.nativeElement.style.top=r+t.PIXELS},t.prototype.getDOMElement=function(){return this.tooltipDOMElement},t.PIXELS="px",t}()},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(2);r.d(e,"GoogleChartComponent",function(){return o.a});var n=r(6);r.n(n);r.o(n,"ChartReadyEvent")&&r.d(e,"ChartReadyEvent",function(){return n.ChartReadyEvent});var i=r(7);r.n(i);r.o(i,"ChartErrorEvent")&&r.d(e,"ChartErrorEvent",function(){return i.ChartErrorEvent});var a=r(8);r.n(a);r.o(a,"ChartSelectEvent")&&r.d(e,"ChartSelectEvent",function(){return a.ChartSelectEvent});var c=r(4);r.d(e,"ChartHTMLTooltip",function(){return c.a});var u=r(1);r.d(e,"ChartMouseOverEvent",function(){return u.c}),r.d(e,"ChartMouseOutEvent",function(){return u.b}),r.d(e,"MouseOverEvent",function(){return u.e}),r.d(e,"BoundingBox",function(){return u.BoundingBox}),r.d(e,"DataPointPosition",function(){return u.DataPointPosition});var s=r(9);r.d(e,"Ng2GoogleChartsModule",function(){return s.a})},function(t,e){},function(t,e){},function(t,e){},function(t,e,r){"use strict";r.d(e,"a",function(){return c});var o=r(0),n=(r.n(o),r(2)),i=r(3),a=this&&this.__decorate||function(t,e,r,o){var n,i=arguments.length,a=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,r,o);else for(var c=t.length-1;c>=0;c--)(n=t[c])&&(a=(i<3?n(a):i>3?n(e,r,a):n(e,r))||a);return i>3&&a&&Object.defineProperty(e,r,a),a},c=function(){function t(){}return t=a([Object(o.NgModule)({declarations:[n.a],providers:[i.a],exports:[n.a]})],t)}()}])});